//JSON

var DataJSON = ({
		Teams: ({
			TeamTitle: "FTG Teams",
			TeamFooter:"List of teams in FTG" ,
			TeamList: [
			{title: "Moderating Team", description: "The moderators are the group who make sure that our forums are free of profanity and make the FTG forums better for everyone else."},
			{title: "Activities Team", description: "The activies team works hard to make sure that you are having fun in FTG.  They schedule tournaments as well as who you will battle every thursday."},
			{title: "Broad/Com Team", description: "The broad/Com Team is a team dedicated to creating videos showing the fun we all have in FTG.  They also create gameplay videos."	}]
			}),
			
		Divisions: ({
			DivTitle: "FTG Divisions",
			DivFooter: "List of Div's in FTG",
			DivList: [
			{title: "Maximum Chaos", Description: "Maximum Chaos or MC for short is the first division Created for the Xbox one who is run by FTG Enders Foul as well as FTG BMF"},
			{title: "Fatal Syndicate", Description: "FS is a division on the Xbox 360 that is currently being run by FTG Lavelent."},
			{title: "Absolute Destruction", Description: "Absolute Destruction is the newest squad on the Xbox 360 and is currently being run by FTG Firestorm"}]
			})
});

//Table View
var NewDisplay = Ti.UI.createTableView({  //Create View
	top: StartTitle.height
});

//Table Sections

var TeamSection = Ti.UI.createTableViewSection({  //Teams Section
	headerTitle: DataJSON.Teams.TeamTitle,
	footerTitle: DataJSON.Teams.TeamFooter
});

var DivSection = Ti.UI.createTableViewSection({
	headerTitle: DataJSON.Divisions.DivTitle,
	footerTitle: DataJSON.Divisions.DivFooter
});


//Navigator

var Navigation = Ti.UI.iOS.createNavigationWindow({
	window: Background
});


//Load Detail Functions

var PullTeamInfo = function(){
	
	var InfoWindow = Ti.UI.createWindow({
		backgroundColor: "gray"
	});
	
	var TeamTitleView = Ti.UI.createView({
	height: 70,
	top: 0,
	backgroundColor: "white"
	});
	
	/*var TeamLabel = Ti.UI.createLabel({
	text: this.title,
	font: {fontFamily: "Comic Sans", fontWeight: "bold", fontSize: 20}
	});*/
	
	var TeamDetailLabel = Ti.UI.createLabel({
	text: this.detail,
	left: 20,
	right: 20,
	top: 90
	});
	
	
	
	//TeamTitleView.add(TeamLabel);
	InfoWindow.add(TeamTitleView, TeamDetailLabel);


var PullDivInfo = function(){
	
	var InfoWindow = Ti.UI.createWindow({
		backgroundColor: "gray"
	});
	
	var DivTitleView = Ti.UI.createView({
	height: 70,
	top: 0,
	backgroundColor: "white"
	});

	var DivLabel = Ti.UI.createLabel({
	text: this.title,
	font: {fontFamily: "Comic Sans", fontWeight: "bold", fontSize: 20}
	});
	
	var DivDetailLabel = Ti.UI.createLabel({
	text: this.detail,
	left: 20,
	right: 20,
	top: DivTitleView.height + 20
	});
	
	var Navigator = Ti.UI.iOS.createNavigationWindow({
		title: this.detail
	});
	
	DivTitleView.add(DivLabel);
	InfoWindow.add(DivTitleView, DivDetailLabel);
	InfoWindow.open();
};

//Table View Rows
for(var i=0, j = DataJSON.Teams.TeamList.length;i<j;i++){
	var TeamsRow = Ti.UI.createTableViewRow({
		title: DataJSON.Teams.TeamList[i].title,
		detail: DataJSON.Teams.TeamList[i].description,
		hasChild: true,
	});
	TeamSection.add(TeamsRow);
	TeamsRow.addEventListener("click", PullTeamInfo);
}


for(var l=0, m = DataJSON.Divisions.DivList.length;l<m;l++){
	var DivRow = Ti.UI.createTableViewRow({
		title: DataJSON.Divisions.DivList[l].title,
		detail: DataJSON.Divisions.DivList[l].Description,
		hasChild: true
	});
	DivSection.add(DivRow);
	DivRow.addEventListener("click",PullDivInfo);
}



var ViewSections = [TeamSection, DivSection];

if(Ti.Platform.name === "iPhone OS"){
	NewDisplay.style = Ti.UI.iPhone.TableViewStyle.GROUPED;
}



NewDisplay.setData(ViewSections);
NewDisplay.add(TeamSection);
Background.add(NewDisplay);